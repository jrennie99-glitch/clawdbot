[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[program:frontend]
command=node /app/serve-ui.mjs
directory=/app
autostart=true
autorestart=true
startsecs=5
startretries=3
stdout_logfile=/var/log/supervisor/frontend.out.log
stderr_logfile=/var/log/supervisor/frontend.err.log
environment=PORT="3000",NODE_ENV="production"

[program:backend]
command=node /app/scripts/run-node.mjs gateway --port 8001
directory=/app
autostart=false
autorestart=true
startsecs=10
startretries=3
stdout_logfile=/var/log/supervisor/backend.out.log
stderr_logfile=/var/log/supervisor/backend.err.log
environment=PORT="8001",NODE_ENV="production"
